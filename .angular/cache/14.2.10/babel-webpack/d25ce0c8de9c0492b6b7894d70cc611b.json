{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport { NavigationEnum } from 'src/app/model/enums/navigation.enum';\nimport MessageUtils from 'src/app/utils/message-util';\nimport { NgForm } from '@angular/forms';\nimport { cpf, cnpj } from 'cpf-cnpj-validator';\nimport { finalize } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"primeng/api\";\nimport * as i2 from \"src/app/services/commons/common.service\";\nimport * as i3 from \"primeng/dynamicdialog\";\nimport * as i4 from \"src/app/services/combos/combo.service\";\nimport * as i5 from \"src/app/services/usuario/usuario-service\";\nimport * as i6 from \"primeng/button\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"primeng/toast\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"primeng/inputtext\";\nimport * as i11 from \"primeng/dropdown\";\nimport * as i12 from \"primeng/inputmask\";\nimport * as i13 from \"primeng/table\";\nimport * as i14 from \"primeng/divider\";\nimport * as i15 from \"primeng/captcha\";\nfunction EsqueciSenhaComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18)(1, \"h5\", 19);\n    i0.ɵɵtext(2, \"Digite seu email e CPF ou CNPJ\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction EsqueciSenhaComponent_small_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtext(1, \"* O campo Email \\u00E9 obrigat\\u00F3rio.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsqueciSenhaComponent_small_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtext(1, \"* Informe um Email v\\u00E1lido.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsqueciSenhaComponent_div_20_small_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtext(1, \"* O campo CPF \\u00E9 obrigat\\u00F3rio.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsqueciSenhaComponent_div_20_small_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtext(1, \"*CPF invalido.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsqueciSenhaComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 21);\n    i0.ɵɵtext(2, \"CPF\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"p-inputMask\", 22, 23);\n    i0.ɵɵtemplate(5, EsqueciSenhaComponent_div_20_small_5_Template, 2, 0, \"small\", 11);\n    i0.ɵɵtemplate(6, EsqueciSenhaComponent_div_20_small_6_Template, 2, 0, \"small\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r7 = i0.ɵɵreference(4);\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"required\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r7.hasError(\"required\") && _r7.dirty);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.validaDocumento(_r7.value, 1));\n  }\n}\nfunction EsqueciSenhaComponent_div_21_small_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtext(1, \"* O campo CPF \\u00E9 obrigat\\u00F3rio.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsqueciSenhaComponent_div_21_small_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\", 20);\n    i0.ɵɵtext(1, \"*CPF invalido.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EsqueciSenhaComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"label\", 21);\n    i0.ɵɵtext(2, \"CNPJ\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"p-inputMask\", 24, 25);\n    i0.ɵɵtemplate(5, EsqueciSenhaComponent_div_21_small_5_Template, 2, 0, \"small\", 11);\n    i0.ɵɵtemplate(6, EsqueciSenhaComponent_div_21_small_6_Template, 2, 0, \"small\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r10 = i0.ɵɵreference(4);\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"required\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r10.hasError(\"required\") && _r10.dirty);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.validaDocumento(_r10.value, 2));\n  }\n}\nexport let EsqueciSenhaComponent = /*#__PURE__*/(() => {\n  class EsqueciSenhaComponent {\n    constructor(messageService, commomService, dialogService, ref, config, comboService, usuarioService) {\n      this.messageService = messageService;\n      this.commomService = commomService;\n      this.dialogService = dialogService;\n      this.ref = ref;\n      this.config = config;\n      this.comboService = comboService;\n      this.usuarioService = usuarioService;\n      this.dialog = false;\n      this.prestador = {};\n      this.prestadores = [];\n      this.tempoPrestadorOcorrencia = {};\n      this.tempoPrestadorOcorrencias = [];\n      this.ocorrencia = {};\n      this.notificacao = {};\n      this.pre = {};\n      this.loading = true;\n      this.botao = true;\n      this.tipoPessoaSelecionada = 1;\n      this.tipoPessoa = [{}];\n    }\n    ngOnInit() {\n      this.tipoPessoa = this.comboService.getTipoPessoa();\n    }\n    submit(form) {\n      var dto = {};\n      if (this.tipoPessoaSelecionada == 1) {\n        dto = {\n          email: form.value.email,\n          cpfCnpj: form.value.cpf\n        };\n      } else {\n        dto = {\n          email: form.value.email,\n          cpfCnpj: form.value.cnpj\n        };\n      }\n      this.usuarioService.esqueciSenha(dto).pipe(finalize(() => {\n        this.messageService.add(MessageUtils.onSuccessMessage(\"Senha enviada para o seu e-mail\"));\n        this.commomService.reloadComponent();\n        this.commomService.navigate(NavigationEnum.LOGIN);\n        setTimeout(() => {\n          this.ref.close();\n        }, 1000);\n      })).subscribe(response => {}, error => {\n        console.log(error);\n        this.messageService.add(MessageUtils.onErrorMessage(error));\n      });\n    }\n    showResponse(event) {\n      this.botao = false;\n    }\n    validaDocumento(documento, tipoPessoa) {\n      console.log(documento);\n      if (tipoPessoa == 1 && documento != \"\") {\n        return cpf.isValid(documento);\n      } else if (tipoPessoa == 2 && documento != \"\") {\n        return cnpj.isValid(documento);\n      } else return true;\n    }\n    tipoPessoaChange(event) {\n      this.tipoPessoaSelecionada = event.value;\n    }\n  }\n  EsqueciSenhaComponent.ɵfac = function EsqueciSenhaComponent_Factory(t) {\n    return new (t || EsqueciSenhaComponent)(i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.CommomService), i0.ɵɵdirectiveInject(i3.DialogService), i0.ɵɵdirectiveInject(i3.DynamicDialogRef), i0.ɵɵdirectiveInject(i3.DynamicDialogConfig), i0.ɵɵdirectiveInject(i4.ComboService), i0.ɵɵdirectiveInject(i5.UsuarioService));\n  };\n  EsqueciSenhaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EsqueciSenhaComponent,\n    selectors: [[\"app-ocorrencias\"]],\n    features: [i0.ɵɵProvidersFeature([MessageService])],\n    decls: 30,\n    vars: 7,\n    consts: [[\"pTemplate\", \"caption\"], [\"id\", \"reset-senha\", \"autocomplete\", \"off\", 3, \"ngSubmit\"], [\"resetSenha\", \"ngForm\"], [1, \"p-col-12\", \"p-d-flex-12\", \"p-ai-center\", \"p-jc-center\"], [1, \"p-field\"], [1, \"p-fluid\", \"p-formgrid\", \"p-grid\"], [1, \"p-field\", \"p-col\"], [\"for\", \"email\"], [\"type\", \"text\", \"pInputText\", \"\", \"ngModel\", \"\", \"name\", \"email\", \"email\", \"\", \"required\", \"\"], [\"email\", \"ngModel\"], [1, \"p-inputgroup\"], [\"class\", \"p-error\", 4, \"ngIf\"], [\"for\", \"tipoPessoa\"], [\"name\", \"tipoPessoa\", \"placeholder\", \"Selecione\", 3, \"options\", \"ngModel\", \"ngModelChange\", \"onChange\"], [\"class\", \"p-field p-col\", 4, \"ngIf\"], [1, \"p-fluid\"], [\"siteKey\", \"6LcavFIeAAAAAHcuZTrsN7TiI3xp9LMkZ35XFL5-\", 3, \"onResponse\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Enviar\", 1, \"p-button-success\", 3, \"disabled\"], [1, \"p-d-flex\", \"p-ai-center\", \"p-jc-between\"], [1, \"p-m-0\"], [1, \"p-error\"], [\"for\", \"cpf\"], [\"id\", \"cpf\", \"name\", \"cpf\", \"mask\", \"999.999.999-99\", \"ngModel\", \"\", 3, \"required\"], [\"cpf\", \"ngModel\"], [\"id\", \"cpf\", \"name\", \"cnpj\", \"mask\", \"99.999.999/9999-99\", \"ngModel\", \"\", 3, \"required\"], [\"cnpj\", \"ngModel\"]],\n    template: function EsqueciSenhaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r13 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"p-table\");\n        i0.ɵɵtemplate(1, EsqueciSenhaComponent_ng_template_1_Template, 3, 0, \"ng-template\", 0);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"form\", 1, 2);\n        i0.ɵɵlistener(\"ngSubmit\", function EsqueciSenhaComponent_Template_form_ngSubmit_2_listener() {\n          i0.ɵɵrestoreView(_r13);\n          const _r1 = i0.ɵɵreference(3);\n          return i0.ɵɵresetView(ctx.submit(_r1));\n        });\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"div\", 6)(8, \"label\", 7);\n        i0.ɵɵtext(9, \"E-mail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 8, 9);\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵtemplate(13, EsqueciSenhaComponent_small_13_Template, 2, 0, \"small\", 11);\n        i0.ɵɵtemplate(14, EsqueciSenhaComponent_small_14_Template, 2, 0, \"small\", 11);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 5)(16, \"div\", 6)(17, \"label\", 12);\n        i0.ɵɵtext(18, \"Tipo Pessoa\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p-dropdown\", 13);\n        i0.ɵɵlistener(\"ngModelChange\", function EsqueciSenhaComponent_Template_p_dropdown_ngModelChange_19_listener($event) {\n          return ctx.tipoPessoaSelecionada = $event;\n        })(\"onChange\", function EsqueciSenhaComponent_Template_p_dropdown_onChange_19_listener($event) {\n          return ctx.tipoPessoaChange($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(20, EsqueciSenhaComponent_div_20_Template, 7, 3, \"div\", 14);\n        i0.ɵɵtemplate(21, EsqueciSenhaComponent_div_21_Template, 7, 3, \"div\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 15);\n        i0.ɵɵelement(23, \"p-divider\");\n        i0.ɵɵelementStart(24, \"div\", 10);\n        i0.ɵɵelement(25, \"p-toast\");\n        i0.ɵɵelementStart(26, \"p-captcha\", 16);\n        i0.ɵɵlistener(\"onResponse\", function EsqueciSenhaComponent_Template_p_captcha_onResponse_26_listener($event) {\n          return ctx.showResponse($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(27, \"p-divider\");\n        i0.ɵɵelementStart(28, \"div\", 4);\n        i0.ɵɵelement(29, \"button\", 17);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        const _r2 = i0.ɵɵreference(11);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngIf\", _r2.hasError(\"required\") && _r2.dirty);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", _r2.hasError(\"email\") && _r2.dirty);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"options\", ctx.tipoPessoa)(\"ngModel\", ctx.tipoPessoaSelecionada);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.tipoPessoaSelecionada == 1);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.tipoPessoaSelecionada == 2);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"disabled\", ctx.botao);\n      }\n    },\n    dependencies: [i1.PrimeTemplate, i6.ButtonDirective, i7.NgIf, i8.Toast, i9.ɵNgNoValidate, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgControlStatusGroup, i9.RequiredValidator, i9.EmailValidator, i9.NgModel, i9.NgForm, i10.InputText, i11.Dropdown, i12.InputMask, i13.Table, i14.Divider, i15.Captcha],\n    encapsulation: 2\n  });\n  return EsqueciSenhaComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}