{"ast":null,"code":"import { Prestador } from '../../../model/vo/prestador';\nimport { ConfirmationService, MessageService } from 'primeng/api';\nimport MessageUtils from 'src/app/utils/message-util';\nimport { NavigationEnum } from 'src/app/model/enums/navigation.enum';\nimport { NotAuthenticatedError } from 'src/app/interceptors/auth.http.interceptor';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"primeng/api\";\nimport * as i2 from \"src/app/services/commons/common.service\";\nimport * as i3 from \"src/app/services/prestadores/prestador-service\";\nimport * as i4 from \"primeng/button\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"primeng/toast\";\nimport * as i7 from \"primeng/confirmdialog\";\nimport * as i8 from \"primeng/table\";\nfunction ListarPrestadorComponent_p_table_0_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"h5\", 9);\n    i0.ɵɵtext(2, \"Lista de Prestadores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 10)(4, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ListarPrestadorComponent_p_table_0_ng_template_2_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.novoPrestador());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ListarPrestadorComponent_p_table_0_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 12);\n    i0.ɵɵtext(2, \"Nome \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 13);\n    i0.ɵɵtext(4, \"CPF/CNPJ\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 13);\n    i0.ɵɵtext(6, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 14);\n    i0.ɵɵtext(8, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 13);\n    i0.ɵɵtext(10, \"A\\u00E7\\u00F5es\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListarPrestadorComponent_p_table_0_4_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 13);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 13);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 13)(10, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ListarPrestadorComponent_p_table_0_4_ng_template_0_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const prestador_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r10.editar(prestador_r9));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ListarPrestadorComponent_p_table_0_4_ng_template_0_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const prestador_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r12.deletar(prestador_r9));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const prestador_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(prestador_r9.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(prestador_r9.cpfCnpj);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(prestador_r9.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(prestador_r9.situacao);\n  }\n}\nfunction ListarPrestadorComponent_p_table_0_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ListarPrestadorComponent_p_table_0_4_ng_template_0_Template, 12, 4, \"ng-template\", 15);\n  }\n}\nfunction ListarPrestadorComponent_p_table_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-table\", 4, 5);\n    i0.ɵɵtemplate(2, ListarPrestadorComponent_p_table_0_ng_template_2_Template, 5, 0, \"ng-template\", 6);\n    i0.ɵɵtemplate(3, ListarPrestadorComponent_p_table_0_ng_template_3_Template, 11, 0, \"ng-template\", 7);\n    i0.ɵɵtemplate(4, ListarPrestadorComponent_p_table_0_4_Template, 1, 0, null, 1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", ctx_r0.prestadores)(\"rows\", 10)(\"paginator\", ctx_r0.prestadores.length > 0)(\"loading\", ctx_r0.loading)(\"rowHover\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.prestadores.length);\n  }\n}\nfunction ListarPrestadorComponent_p_table_1_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"h6\", 9);\n    i0.ɵɵtext(2, \"Nenhum prestador encontrado\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListarPrestadorComponent_p_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p-table\");\n    i0.ɵɵtemplate(1, ListarPrestadorComponent_p_table_1_ng_template_1_Template, 3, 0, \"ng-template\", 6);\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nexport let ListarPrestadorComponent = /*#__PURE__*/(() => {\n  class ListarPrestadorComponent {\n    constructor(confirmationService, messageService, commomService, prestadorService) {\n      this.confirmationService = confirmationService;\n      this.messageService = messageService;\n      this.commomService = commomService;\n      this.prestadorService = prestadorService;\n      this.loading = true;\n      this.prestador = new Prestador();\n      this.prestadores = [];\n      this.position = \"top\";\n      this.itens = [{}];\n      this.error404 = false;\n    }\n    ngOnInit() {\n      this.loading = true;\n      this.listarPrestadores();\n    }\n    editar(prestadorSelecionado) {\n      this.prestador = prestadorSelecionado;\n      this.commomService.navigateWithParams(NavigationEnum.EDITAR_PRESTADORES, this.prestador.id);\n    }\n    deletar(prestador) {\n      let idPrestador = prestador.id;\n      this.confirmationService.confirm({\n        message: 'Tem certeza que deseja remover o Prestador ' + prestador.nome + ' ?',\n        header: 'Confirmação',\n        icon: 'pi pi-info-circle',\n        accept: () => {\n          this.removerPrestador(idPrestador);\n        },\n        key: \"positionDialog\"\n      });\n    }\n    novoPrestador() {\n      this.commomService.navigate(NavigationEnum.ADICIONAR_PRESTADORES);\n    }\n    reload() {\n      this.commomService.reloadComponent();\n    }\n    removerPrestador(idPrestador) {\n      this.prestadorService.delete(idPrestador).subscribe(data => {\n        this.messageService.add(MessageUtils.onSuccessMessage(data.mensagem));\n      }, error => {\n        console.log(error);\n        this.messageService.add(MessageUtils.onErrorMessage(\"Ocorreu um erro ao processar a requisição.\"));\n      });\n    }\n    listarPrestadores() {\n      this.prestadorService.read().then(data => {\n        this.prestadores = data;\n        this.loading = false;\n      }).catch(error => {\n        console.error(error);\n        if (error.includes('404')) {\n          this.messageService.add(MessageUtils.onErrorMessage(\"Cliente não possui Ocorrências\"));\n          this.error404 = true;\n          this.loading = false;\n        }\n        if (error instanceof NotAuthenticatedError) {\n          this.messageService.add(MessageUtils.onErrorMessage(\"Sua Sessão Expirou, faça Login Novamente\"));\n          this.commomService.navigate(NavigationEnum.LOGIN);\n        }\n        this.messageService.add(MessageUtils.onErrorMessage(error));\n        this.loading = false;\n      });\n    }\n  }\n  ListarPrestadorComponent.ɵfac = function ListarPrestadorComponent_Factory(t) {\n    return new (t || ListarPrestadorComponent)(i0.ɵɵdirectiveInject(i1.ConfirmationService), i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.CommomService), i0.ɵɵdirectiveInject(i3.PrestadorService));\n  };\n  ListarPrestadorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListarPrestadorComponent,\n    selectors: [[\"listar-prestador\"]],\n    features: [i0.ɵɵProvidersFeature([ConfirmationService, MessageService])],\n    decls: 4,\n    vars: 7,\n    consts: [[\"dataKey\", \"id\", 3, \"value\", \"rows\", \"paginator\", \"loading\", \"rowHover\", 4, \"ngIf\"], [4, \"ngIf\"], [\"key\", \"positionDialog\", \"acceptLabel\", \"SIM\", \"acceptButtonStyleClass\", \"p-button-success\", \"rejectLabel\", \"N\\u00C3O\", \"rejectButtonStyleClass\", \"p-button-danger\", 3, \"position\", \"baseZIndex\"], [\"position\", \"top-right\", 3, \"onClose\"], [\"dataKey\", \"id\", 3, \"value\", \"rows\", \"paginator\", \"loading\", \"rowHover\"], [\"dt\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [1, \"p-d-flex\", \"p-ai-center\", \"p-jc-between\"], [1, \"p-m-0\"], [1, \"p-input-icon-left\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Novo\", \"icon\", \"pi pi-plus\", 1, \"p-button-success\", \"p-mr-2\", 3, \"click\"], [2, \"text-align\", \"center\", \"width\", \"350px\"], [2, \"text-align\", \"center\"], [2, \"text-align\", \"center\", \"width\", \"10px\"], [\"pTemplate\", \"body\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", 1, \"p-button-rounded\", \"p-button-success\", \"p-mr-2\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", 1, \"p-button-rounded\", \"p-button-danger\", 3, \"click\"]],\n    template: function ListarPrestadorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ListarPrestadorComponent_p_table_0_Template, 5, 6, \"p-table\", 0);\n        i0.ɵɵtemplate(1, ListarPrestadorComponent_p_table_1_Template, 2, 0, \"p-table\", 1);\n        i0.ɵɵelement(2, \"p-confirmDialog\", 2);\n        i0.ɵɵelementStart(3, \"p-toast\", 3);\n        i0.ɵɵlistener(\"onClose\", function ListarPrestadorComponent_Template_p_toast_onClose_3_listener() {\n          return ctx.reload();\n        });\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.prestadores);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.prestadores);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(6, _c0));\n        i0.ɵɵproperty(\"position\", ctx.position)(\"baseZIndex\", 10000);\n      }\n    },\n    dependencies: [i1.PrimeTemplate, i4.ButtonDirective, i5.NgIf, i6.Toast, i7.ConfirmDialog, i8.Table],\n    styles: [\"[_nghost-%COMP%]    {.p-paginator {.p-paginator-current {margin-left: auto;}} .p-progressbar {height: .5rem; background-color: #D8DADC; .p-progressbar-value {background-color: #607D8B;}} .table-header {display: flex; justify-content: space-between;} .p-calendar .p-datepicker {min-width: 25rem; td {font-weight: 400;}} .p-datatable.p-datatable-customers {.p-datatable-header {padding: 1rem; text-align: left; font-size: 1.5rem;} .p-paginator {padding: 1rem;} .p-datatable-thead > tr > th {text-align: left;} .p-datatable-tbody > tr > td {cursor: auto;} .p-dropdown-label:not(.p-placeholder) {text-transform: uppercase;}} .p-datatable-customers .p-datatable-tbody > tr > td .p-column-title {display: none;}}@media screen and (max-width: 960px){[_nghost-%COMP%]    {.p-datatable {&.p-datatable-customers {.p-datatable-thead > tr > th,.p-datatable-tfoot > tr > td {display: none !important;} .p-datatable-tbody > tr {border-bottom: 1px solid var(--layer-2); > td {text-align: left; display: block; border: 0 none !important; width: 100% !important; float: left; clear: left; border: 0 none; .p-column-title {padding: .4rem; min-width: 30%; display: inline-block; margin: -.4rem 1rem -.4rem -.4rem; font-weight: bold;} .p-progressbar {margin-top: .5rem;}}}}}}}\"]\n  });\n  return ListarPrestadorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}