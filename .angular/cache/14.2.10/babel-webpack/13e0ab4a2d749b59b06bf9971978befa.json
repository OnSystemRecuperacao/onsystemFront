{"ast":null,"code":"import { ConfirmationService, MessageService } from 'primeng/api';\nimport MessageUtils from 'src/app/utils/message-util';\nimport { NavigationEnum } from 'src/app/model/enums/navigation.enum';\nimport * as FileSaver from 'file-saver';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"primeng/api\";\nimport * as i2 from \"src/app/services/combos/combo.service\";\nimport * as i3 from \"src/app/services/commons/common.service\";\nimport * as i4 from \"src/app/services/clientes/cliente-service\";\nimport * as i5 from \"primeng/button\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"primeng/toast\";\nimport * as i8 from \"primeng/confirmdialog\";\nimport * as i9 from \"primeng/table\";\nfunction ListarClienteComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"h5\", 8);\n    i0.ɵɵtext(2, \"Lista de Clientes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 9)(4, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ListarClienteComponent_ng_template_2_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.novoCliente());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ListarClienteComponent_ng_template_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.exportExcel());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ListarClienteComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 12);\n    i0.ɵɵtext(2, \"Nome \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 13);\n    i0.ɵɵtext(4, \"CPF/CNPJ\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 13);\n    i0.ɵɵtext(6, \"E-mail\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 14);\n    i0.ɵɵtext(8, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 13);\n    i0.ɵɵtext(10, \"A\\u00E7\\u00F5es\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListarClienteComponent_4_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 13);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 13);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 13)(10, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ListarClienteComponent_4_ng_template_0_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const cliente_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.editar(cliente_r8));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ListarClienteComponent_4_ng_template_0_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const cliente_r8 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.deletar(cliente_r8));\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cliente_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r8.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r8.cpfCnpj);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r8.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(cliente_r8.situacao);\n  }\n}\nfunction ListarClienteComponent_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ListarClienteComponent_4_ng_template_0_Template, 12, 4, \"ng-template\", 15);\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nexport let ListarClienteComponent = /*#__PURE__*/(() => {\n  class ListarClienteComponent {\n    constructor(confirmationService, messageService, comboService, commomService, clienteService) {\n      this.confirmationService = confirmationService;\n      this.messageService = messageService;\n      this.comboService = comboService;\n      this.commomService = commomService;\n      this.clienteService = clienteService;\n      this.loading = true;\n      this.cliente = {};\n      this.clientes = [{}];\n      this.exibePaginacao = false;\n      this.position = \"top\";\n    }\n    ngOnInit() {\n      this.loading = true;\n      this.listar();\n    }\n    editar(cliente) {\n      this.cliente = cliente;\n      this.commomService.navigateWithParams(NavigationEnum.EDITAR_CLIENTES, this.cliente.id);\n    }\n    deletar(cliente) {\n      let idCliente = cliente.id;\n      this.confirmationService.confirm({\n        message: 'Tem certeza que deseja remover o Cliente ' + cliente.nome + ' ?',\n        header: 'Confirmação',\n        icon: 'pi pi-info-circle',\n        accept: () => {\n          this.removerCliente(idCliente);\n        },\n        key: \"positionDialog\"\n      });\n    }\n    novoCliente() {\n      this.commomService.navigate(NavigationEnum.ADICIONAR_CLIENTES);\n    }\n    removerCliente(idCliente) {\n      this.clienteService.delete(idCliente).subscribe(data => {\n        this.messageService.add(MessageUtils.onSuccessMessage(\"O registro foi excluído com sucesso !\"));\n      }, error => {\n        console.log(error);\n        this.messageService.add(MessageUtils.onErrorMessage(error));\n      });\n    }\n    reload() {\n      this.commomService.reloadComponent();\n    }\n    listar() {\n      this.clienteService.read().subscribe(data => {\n        this.loading = false;\n        this.clientes = data;\n      }, error => {\n        this.messageService.add(MessageUtils.onErrorMessage(error));\n      }, () => {\n        this.exibePaginacao = this.clientes?.length > 0;\n        this.loading = false;\n      });\n    }\n    exportExcel() {\n      import(\"xlsx\").then(xlsx => {\n        const worksheet = xlsx.utils.json_to_sheet(this.clientes);\n        const workbook = {\n          Sheets: {\n            'data': worksheet\n          },\n          SheetNames: ['data']\n        };\n        const excelBuffer = xlsx.write(workbook, {\n          bookType: 'xlsx',\n          type: 'array'\n        });\n        this.saveAsExcelFile(excelBuffer, \"clientes\");\n      });\n    }\n    saveAsExcelFile(buffer, fileName) {\n      let EXCEL_TYPE = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\n      let EXCEL_EXTENSION = '.xlsx';\n      const data = new Blob([buffer], {\n        type: EXCEL_TYPE\n      });\n      FileSaver.saveAs(data, fileName + '_export_' + new Date().getTime() + EXCEL_EXTENSION);\n    }\n  }\n  ListarClienteComponent.ɵfac = function ListarClienteComponent_Factory(t) {\n    return new (t || ListarClienteComponent)(i0.ɵɵdirectiveInject(i1.ConfirmationService), i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.ComboService), i0.ɵɵdirectiveInject(i3.CommomService), i0.ɵɵdirectiveInject(i4.ClienteService));\n  };\n  ListarClienteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListarClienteComponent,\n    selectors: [[\"listar-cliente\"]],\n    features: [i0.ɵɵProvidersFeature([ConfirmationService, MessageService])],\n    decls: 7,\n    vars: 11,\n    consts: [[\"dataKey\", \"id\", 3, \"value\", \"rows\", \"paginator\", \"loading\", \"rowHover\"], [\"dt\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [4, \"ngIf\"], [\"key\", \"positionDialog\", \"acceptLabel\", \"SIM\", \"acceptButtonStyleClass\", \"p-button-success\", \"rejectLabel\", \"N\\u00C3O\", \"rejectButtonStyleClass\", \"p-button-danger\", 3, \"position\", \"baseZIndex\"], [\"position\", \"top-right\", 3, \"onClose\"], [1, \"p-d-flex\", \"p-ai-center\", \"p-jc-between\"], [1, \"p-m-0\"], [1, \"p-input-icon-left\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Novo\", \"icon\", \"pi pi-plus\", 1, \"p-button-success\", \"p-mr-2\", 3, \"click\"], [\"type\", \"button\", \"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-file-excel\", \"pTooltip\", \"XLS\", \"tooltipPosition\", \"bottom\", 1, \"p-button-success\", \"p-mr-2\", 3, \"click\"], [2, \"text-align\", \"center\", \"width\", \"350px\"], [2, \"text-align\", \"center\"], [2, \"text-align\", \"center\", \"width\", \"10px\"], [\"pTemplate\", \"body\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", 1, \"p-button-rounded\", \"p-button-success\", \"p-mr-2\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", 1, \"p-button-rounded\", \"p-button-danger\", 3, \"click\"]],\n    template: function ListarClienteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p-table\", 0, 1);\n        i0.ɵɵtemplate(2, ListarClienteComponent_ng_template_2_Template, 6, 0, \"ng-template\", 2);\n        i0.ɵɵtemplate(3, ListarClienteComponent_ng_template_3_Template, 11, 0, \"ng-template\", 3);\n        i0.ɵɵtemplate(4, ListarClienteComponent_4_Template, 1, 0, null, 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"p-confirmDialog\", 5);\n        i0.ɵɵelementStart(6, \"p-toast\", 6);\n        i0.ɵɵlistener(\"onClose\", function ListarClienteComponent_Template_p_toast_onClose_6_listener() {\n          return ctx.reload();\n        });\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"value\", ctx.clientes)(\"rows\", 10)(\"paginator\", ctx.exibePaginacao)(\"loading\", ctx.loading)(\"rowHover\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.exibePaginacao);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(10, _c0));\n        i0.ɵɵproperty(\"position\", ctx.position)(\"baseZIndex\", 10000);\n      }\n    },\n    dependencies: [i1.PrimeTemplate, i5.ButtonDirective, i6.NgIf, i7.Toast, i8.ConfirmDialog, i9.Table],\n    styles: [\"[_nghost-%COMP%]    {.p-paginator {.p-paginator-current {margin-left: auto;}} .p-progressbar {height: .5rem; background-color: #D8DADC; .p-progressbar-value {background-color: #607D8B;}} .table-header {display: flex; justify-content: space-between;} .p-calendar .p-datepicker {min-width: 25rem; td {font-weight: 400;}} .p-datatable.p-datatable-customers {.p-datatable-header {padding: 1rem; text-align: left; font-size: 1.5rem;} .p-paginator {padding: 1rem;} .p-datatable-thead > tr > th {text-align: left;} .p-datatable-tbody > tr > td {cursor: auto;} .p-dropdown-label:not(.p-placeholder) {text-transform: uppercase;}} .p-datatable-customers .p-datatable-tbody > tr > td .p-column-title {display: none;}}@media screen and (max-width: 960px){[_nghost-%COMP%]    {.p-datatable {&.p-datatable-customers {.p-datatable-thead > tr > th,.p-datatable-tfoot > tr > td {display: none !important;} .p-datatable-tbody > tr {border-bottom: 1px solid var(--layer-2); > td {text-align: left; display: block; border: 0 none !important; width: 100% !important; float: left; clear: left; border: 0 none; .p-column-title {padding: .4rem; min-width: 30%; display: inline-block; margin: -.4rem 1rem -.4rem -.4rem; font-weight: bold;} .p-progressbar {margin-top: .5rem;}}}}}}}\"]\n  });\n  return ListarClienteComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}