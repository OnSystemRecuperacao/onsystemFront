{"ast":null,"code":"import { ConfirmationService, MessageService } from 'primeng/api';\nimport { NavigationEnum } from 'src/app/model/enums/navigation.enum';\nimport { Tenancy } from 'src/app/model/vo/tenancy';\nimport { Usuario } from 'src/app/model/vo/usuario';\nimport MessageUtils from 'src/app/utils/message-util';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth/auth.service\";\nimport * as i2 from \"primeng/api\";\nimport * as i3 from \"src/app/services/commons/common.service\";\nimport * as i4 from \"src/app/services/usuario/usuario-service\";\nimport * as i5 from \"primeng/button\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"primeng/toast\";\nimport * as i8 from \"primeng/confirmdialog\";\nimport * as i9 from \"primeng/table\";\nfunction ListarUsuarioComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"h5\", 8);\n    i0.ɵɵtext(2, \"Lista de usu\\u00E1rio\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 9)(4, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ListarUsuarioComponent_ng_template_2_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.novoUsuario());\n    });\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction ListarUsuarioComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 11);\n    i0.ɵɵtext(2, \"Nome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 11);\n    i0.ɵɵtext(4, \"Email \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 11);\n    i0.ɵɵtext(6, \"Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 11);\n    i0.ɵɵtext(8, \"A\\u00E7\\u00F5es\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ListarUsuarioComponent_4_ng_template_0_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ListarUsuarioComponent_4_ng_template_0_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const usuario_r7 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.desativar(usuario_r7));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListarUsuarioComponent_4_ng_template_0_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ListarUsuarioComponent_4_ng_template_0_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const usuario_r7 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.ativar(usuario_r7));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListarUsuarioComponent_4_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 11);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 11);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 11);\n    i0.ɵɵtemplate(8, ListarUsuarioComponent_4_ng_template_0_button_8_Template, 1, 0, \"button\", 13);\n    i0.ɵɵtemplate(9, ListarUsuarioComponent_4_ng_template_0_button_9_Template, 1, 0, \"button\", 14);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const usuario_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(usuario_r7.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(usuario_r7.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(usuario_r7.situacao);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", usuario_r7.situacao == \"ATIVO\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", usuario_r7.situacao == \"INATIVO\");\n  }\n}\nfunction ListarUsuarioComponent_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, ListarUsuarioComponent_4_ng_template_0_Template, 10, 5, \"ng-template\", 12);\n  }\n}\nconst _c0 = function () {\n  return {\n    width: \"50vw\"\n  };\n};\nexport let ListarUsuarioComponent = /*#__PURE__*/(() => {\n  class ListarUsuarioComponent {\n    constructor(authService, confirmationService, commomService, messageService, usuarioService) {\n      this.authService = authService;\n      this.confirmationService = confirmationService;\n      this.commomService = commomService;\n      this.messageService = messageService;\n      this.usuarioService = usuarioService;\n      this.loading = true;\n      this.usuario = {};\n      this.usuarios = [];\n      this.usuarioLogado = new Usuario();\n      this.position = \"top\";\n    }\n    ngOnInit() {\n      this.loadUsuarioLogado();\n      this.loading = true;\n      this.listarUsuarios();\n    }\n    novoUsuario() {\n      this.commomService.navigate(NavigationEnum.ADICIONAR_USUARIOS);\n    }\n    listarUsuarios() {\n      let idTenancy = this.usuarioLogado.tenancy?.id;\n      this.usuarioService.read(idTenancy).then(response => {\n        this.usuarios = response;\n        this.loading = false;\n      }).catch(error => this.messageService.add(MessageUtils.onErrorMessage(error)));\n    }\n    ativar(usuarioSelecionado) {\n      this.confirmationService.confirm({\n        message: 'Tem certeza que deseja ATIVAR o Usuário ' + usuarioSelecionado.email + ' ?',\n        header: 'Confirmação',\n        icon: 'pi pi-info-circle',\n        accept: () => {\n          this.alterarStatusUsuario(usuarioSelecionado, true);\n        },\n        key: \"positionDialog\"\n      });\n    }\n    desativar(usuarioSelecionado) {\n      this.confirmationService.confirm({\n        message: 'Tem certeza que deseja DESATIVAR o Usuário ' + usuarioSelecionado.email + ' ?',\n        header: 'Confirmação',\n        icon: 'pi pi-info-circle',\n        accept: () => {\n          this.alterarStatusUsuario(usuarioSelecionado, false);\n        },\n        key: \"positionDialog\"\n      });\n    }\n    alterarStatusUsuario(usuario, ativar) {\n      usuario.situacao = ativar ? \"ATIVO\" : \"INATIVO\";\n      this.usuarioService.updateUserStatus(usuario).then(response => {\n        this.messageService.add(MessageUtils.onSuccessMessage(\"Usuário alterado com sucesso\"));\n      }).catch(error => this.messageService.add(MessageUtils.onErrorMessage(error)));\n    }\n    reload() {\n      this.commomService.reloadComponent();\n    }\n    loadUsuarioLogado() {\n      if (this.authService.jwtIsLoad()) {\n        let idTenancy = this.authService.getUsuarioLogado().id_tenancy;\n        this.usuarioLogado.id = this.authService.getUsuarioLogado().id_usuario;\n        this.usuarioLogado.tenancy = new Tenancy(idTenancy);\n      }\n    }\n  }\n  ListarUsuarioComponent.ɵfac = function ListarUsuarioComponent_Factory(t) {\n    return new (t || ListarUsuarioComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ConfirmationService), i0.ɵɵdirectiveInject(i3.CommomService), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i4.UsuarioService));\n  };\n  ListarUsuarioComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListarUsuarioComponent,\n    selectors: [[\"app-usuario\"]],\n    features: [i0.ɵɵProvidersFeature([ConfirmationService, MessageService])],\n    decls: 7,\n    vars: 11,\n    consts: [[\"dataKey\", \"id\", 3, \"value\", \"rows\", \"paginator\", \"loading\", \"rowHover\"], [\"dt\", \"\"], [\"pTemplate\", \"caption\"], [\"pTemplate\", \"header\"], [4, \"ngIf\"], [\"key\", \"positionDialog\", \"acceptLabel\", \"SIM\", \"acceptButtonStyleClass\", \"p-button-success\", \"rejectLabel\", \"N\\u00C3O\", \"rejectButtonStyleClass\", \"p-button-danger\", 3, \"position\", \"baseZIndex\"], [\"position\", \"top-right\", 3, \"onClose\"], [1, \"p-d-flex\", \"p-ai-center\", \"p-jc-between\"], [1, \"p-m-0\"], [1, \"p-input-icon-left\"], [\"pButton\", \"\", \"pRipple\", \"\", \"label\", \"Novo\", \"icon\", \"pi pi-plus\", 1, \"p-button-success\", \"p-mr-2\", 3, \"click\"], [2, \"text-align\", \"center\"], [\"pTemplate\", \"body\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", \"label\", \"Desativar\", \"class\", \"p-button-danger\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", \"label\", \"Ativar\", \"class\", \"p-button-success\", 3, \"click\", 4, \"ngIf\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-pencil\", \"label\", \"Desativar\", 1, \"p-button-danger\", 3, \"click\"], [\"pButton\", \"\", \"pRipple\", \"\", \"icon\", \"pi pi-trash\", \"label\", \"Ativar\", 1, \"p-button-success\", 3, \"click\"]],\n    template: function ListarUsuarioComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p-table\", 0, 1);\n        i0.ɵɵtemplate(2, ListarUsuarioComponent_ng_template_2_Template, 5, 0, \"ng-template\", 2);\n        i0.ɵɵtemplate(3, ListarUsuarioComponent_ng_template_3_Template, 9, 0, \"ng-template\", 3);\n        i0.ɵɵtemplate(4, ListarUsuarioComponent_4_Template, 1, 0, null, 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"p-confirmDialog\", 5);\n        i0.ɵɵelementStart(6, \"p-toast\", 6);\n        i0.ɵɵlistener(\"onClose\", function ListarUsuarioComponent_Template_p_toast_onClose_6_listener() {\n          return ctx.reload();\n        });\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"value\", ctx.usuarios)(\"rows\", 10)(\"paginator\", ctx.usuarios.length > 0)(\"loading\", ctx.loading)(\"rowHover\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.usuarios.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(10, _c0));\n        i0.ɵɵproperty(\"position\", ctx.position)(\"baseZIndex\", 10000);\n      }\n    },\n    dependencies: [i2.PrimeTemplate, i5.ButtonDirective, i6.NgIf, i7.Toast, i8.ConfirmDialog, i9.Table]\n  });\n  return ListarUsuarioComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}